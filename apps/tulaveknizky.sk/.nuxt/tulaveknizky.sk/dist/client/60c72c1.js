(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{323:function(t,e,o){var content=o(326);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("69a9fc1e",content,!0,{sourceMap:!1})},324:function(t,e,o){var content=o(328);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("a957082a",content,!0,{sourceMap:!1})},325:function(t,e,o){"use strict";o(323)},326:function(t,e,o){var r=o(11)(!1);r.push([t.i,".component[data-v-403ff72b]{padding:1px;background-color:rgba(255,212,1,.25098);border-bottom:10px solid #ffd401}",""]),t.exports=r},327:function(t,e,o){"use strict";o(324)},328:function(t,e,o){var r=o(11)(!1);r.push([t.i,".component[data-v-8e91234c]{background-color:#fff;box-shadow:0 .125rem .125rem rgba(0,0,0,.1);border-top:1px solid #eee}.container-standard[data-v-8e91234c]{margin-top:0;margin-bottom:0;padding:0 20px;height:100%}.container-standard>div.flex[data-v-8e91234c]{height:100%}.nav>ul[data-v-8e91234c]{list-style:none;margin:0;padding:0}.nav>ul>li>a[data-v-8e91234c]{padding:10px 16px;border-bottom:1px solid transparent;position:relative;top:0;transition:.2s;display:inline-block;color:#000}.nav>ul>li>a[data-v-8e91234c]:hover{color:#000;text-decoration:none;position:relative;top:2px}.nav>ul>li>a.nuxt-link-active[data-v-8e91234c],.nav>ul>li>a.nuxt-link-exact-active[data-v-8e91234c]{color:#000;text-decoration:none;font-weight:600}.nav>ul>li>a[data-v-8e91234c]{color:rgba(0,0,0,.72157);line-height:24px;text-decoration:none}",""]),t.exports=r},329:function(t,e,o){"use strict";var r={props:{h1:String,h2:String}},n=(o(325),o(6)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"component"},[o("div",{staticClass:"container-hero grid"},[o("div",{staticClass:"grid justify-items-start"},[o("h3",{staticClass:"h3"},[t._v(t._s(t.h1))]),t._v(" "),t.h2?o("h1",{staticClass:"h1"},[t._v(t._s(t.h2))]):t._e()])])])}),[],!1,null,"403ff72b",null);e.a=component.exports},330:function(t,e,o){"use strict";var r={data:function(){return{}},methods:{logout:function(){var t=this;console.log("logout"),this.$store.dispatch("auth/logout").then((function(){t.$router.push("/odhlasenie")}))}}},n=(o(327),o(6)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"component"},[o("div",{staticClass:"container-standard grid justify-items-end"},[o("div",{staticClass:"flex wrap align-items-center justify-content-space-between"},[o("div",{staticClass:"nav"},[o("ul",{staticClass:"flex wrap show-md align-items-center"},[o("li",[o("nuxt-link",{staticClass:"small",attrs:{to:"/admin/orders"}},[t._v("Objednávky")])],1),t._v(" "),o("li",[o("nuxt-link",{staticClass:"small",attrs:{to:"/admin/categories"}},[t._v("Kategórie")])],1),t._v(" "),o("li",[o("nuxt-link",{staticClass:"small",attrs:{to:"/admin/tags"}},[t._v("Značky")])],1),t._v(" "),o("li",[o("nuxt-link",{staticClass:"small",attrs:{to:"/admin/titles"}},[t._v("Knižné tituly")])],1),t._v(" "),o("li",[o("nuxt-link",{staticClass:"small",attrs:{to:"/admin/stock"}},[t._v("Sklad")])],1),t._v(" "),o("li",[o("nuxt-link",{staticClass:"small",attrs:{to:"/admin/users"}},[t._v("Používatelia")])],1)])])])])])}),[],!1,null,"8e91234c",null);e.a=component.exports},408:function(t,e,o){var content=o(467);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("55fbb072",content,!0,{sourceMap:!1})},466:function(t,e,o){"use strict";o(408)},467:function(t,e,o){var r=o(11)(!1);r.push([t.i,".cover[data-v-71f8886b]{min-height:180px;border:1px solid #eee;border-radius:4px;background-repeat:no-repeat;background-position:50%;background-size:cover;cursor:pointer;background-color:#eee;position:relative;padding:5px}.cover>img[data-v-71f8886b]{max-height:180px;min-height:180px;max-width:100%;border-radius:0}.cover>p.small[data-v-71f8886b]{background-color:#fff;border:1px solid #eee;border-radius:4px;padding:4px 20px;margin:5px;position:absolute}",""]),t.exports=r},510:function(t,e,o){"use strict";o.r(e);var r=o(3),n=o(1),l=(o(20),o(9),o(13),o(15),o(329)),c=o(330),d=(o(16),o(73),o(43),o(14),o(72),o(199),{props:["dataDetail","tagList","categoryList"],data:function(){return{submitSuccess:!1,submitError:!1,submitText:"Uložené!",categories:null===this.dataDetail.data.categoriesIds?[]:this.dataDetail.data.categoriesIds.split(","),tags:null===this.dataDetail.data.tagsIds?[]:this.dataDetail.data.tagsIds.split(","),cover:this.dataDetail.data.cover,selectedFileCover:null,selectedFileUrlCover:null,showSaveCover:!1,saveTextCover:"Nahrať"}},methods:{updateCategory:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.$axios.$put("/book/category",{id:e.$route.params.id,category_id:t}).then((function(o){console.log(o.message),"added"===o.message&&e.categories.push(t),"removed"===o.message&&(e.categories=e.categories.filter((function(e){return e!==t}))),console.log(e.categories)}),(function(t){console.log(t)}));case 2:case"end":return o.stop()}}),o)})))()},updateTag:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.$axios.$put("/book/tag",{id:e.$route.params.id,tag_id:t}).then((function(o){console.log(o.message),"added"===o.message&&e.tags.push(t),"removed"===o.message&&(e.tags=e.tags.filter((function(e){return e!==t}))),console.log(e.tags)}),(function(t){console.log(t)}));case 2:case"end":return o.stop()}}),o)})))()},submitForm:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$put("/book",{id:t.$route.params.id,name:t.dataDetail.data.name,author:t.dataDetail.data.author,price:t.dataDetail.data.price,short_text:t.dataDetail.data.short_text,long_text:t.dataDetail.data.long_text}).then((function(e){console.log(e),t.submitSuccess=!0,t.submitText="Uložené!",setTimeout((function(){return t.submitSuccess=!1}),4e3),t.$router.push("/admin/titles")}),(function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},onFileSelectedCover:function(t){this.selectedFileCover=t.target.files[0],this.selectedFileUrlCover=URL.createObjectURL(this.selectedFileCover),this.showSaveCover=!0},onCancelCover:function(){this.selectedFileCover=null,this.selectedFileUrlCover=null,this.showSaveCover=!1},onUploadCover:function(){var t=this,e=new FormData;e.append("myFile",this.selectedFileCover,this.selectedFileCover.name),e.append("book_id",this.$route.params.id),this.$axios.$post("/upload/book-cover",e,{onUploadProgress:function(e){t.saveTextCover=Math.round(e.loaded/e.total*100)+"%"}}).then((function(e){t.showSaveCover=!1,t.saveTextCover="Nahrať",console.log(e)}),(function(t){console.log(t)}))}}}),v=(o(466),o(6)),m=Object(v.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"component"},[o("div",{staticClass:"container-standard grid"},[o("div",{staticClass:"grid gap-40"},[o("h2",[t._v("Upravenie knižného titulu")]),t._v(" "),o("div",{staticClass:"box-form"},[o("div",{staticClass:"grid gap-60 md-col-2 align-items-start"},[o("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm()}}},[o("div",{staticClass:"grid gap-20"},[o("div",[o("label",{attrs:{for:"name"}},[t._v("Názov knihy")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.dataDetail.data.name,expression:"dataDetail.data.name"}],attrs:{type:"text",placeholder:"Názov knihy",name:"name"},domProps:{value:t.dataDetail.data.name},on:{input:function(e){e.target.composing||t.$set(t.dataDetail.data,"name",e.target.value)}}})]),t._v(" "),o("div",[o("label",{attrs:{for:"author"}},[t._v("Autor")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.dataDetail.data.author,expression:"dataDetail.data.author"}],attrs:{type:"text",placeholder:"Autor",name:"author"},domProps:{value:t.dataDetail.data.author},on:{input:function(e){e.target.composing||t.$set(t.dataDetail.data,"author",e.target.value)}}})]),t._v(" "),o("div",[o("label",{attrs:{for:"price"}},[t._v("Cena")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.dataDetail.data.price,expression:"dataDetail.data.price"}],attrs:{type:"text",placeholder:"Cena",name:"price"},domProps:{value:t.dataDetail.data.price},on:{input:function(e){e.target.composing||t.$set(t.dataDetail.data,"price",e.target.value)}}})]),t._v(" "),o("div",[o("label",{attrs:{for:"short_text"}},[t._v("Krátky popis")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataDetail.data.short_text,expression:"dataDetail.data.short_text"}],attrs:{type:"text",placeholder:"Krátky popis",name:"short_text"},domProps:{value:t.dataDetail.data.short_text},on:{input:function(e){e.target.composing||t.$set(t.dataDetail.data,"short_text",e.target.value)}}})]),t._v(" "),o("div",[o("label",{attrs:{for:"long_text"}},[t._v("Celý popis")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataDetail.data.long_text,expression:"dataDetail.data.long_text"}],staticClass:"long",attrs:{type:"text",placeholder:"Celý popis",name:"long_text"},domProps:{value:t.dataDetail.data.long_text},on:{input:function(e){e.target.composing||t.$set(t.dataDetail.data,"long_text",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"justify-self-start grid col-3 auto gap-10 align-items-center"},[o("button",{staticClass:"button cta black",attrs:{type:"submit"}},[t._v("Uložiť")]),t._v(" "),o("nuxt-link",{staticClass:"button cta red",attrs:{to:"/admin/titles"}},[t._v("Zrušiť")]),t._v(" "),o("div",[t.submitSuccess?o("p",{staticClass:"success"},[t._v(t._s(t.submitText))]):t._e()])],1)])]),t._v(" "),o("div",{staticClass:"grid gap-20"},[o("label",{attrs:{for:"long_text"}},[t._v("Obrázok")]),t._v(" "),o("form",{on:{submit:function(e){return e.preventDefault(),t.onUploadCover()}}},[o("div",{staticClass:"grid gap-20"},[null===t.selectedFileUrlCover?o("div",{staticClass:"cover grid",on:{click:function(e){return e.preventDefault(),t.$refs.fileInputCover.click()}}},[o("img",{attrs:{src:"https://storage.tulaveknizky.sk/public/tulaveknizky/img/cover/"+t.cover,alt:""}}),t._v(" "),o("p",{staticClass:"align-self-start justify-self-end small"},[t._v("Vybrať obrázok")])]):o("div",{staticClass:"cover grid",on:{click:function(e){return e.preventDefault(),t.$refs.fileInputCover.click()}}},[o("img",{attrs:{src:t.selectedFileUrlCover,alt:""}}),t._v(" "),o("p",{staticClass:"align-self-start justify-self-end small"},[t._v("Vybrať obrázok")])]),t._v(" "),o("div",{staticClass:"grid gap-10 col-2 auto justify-content-end align-items-center"},[o("button",{directives:[{name:"show",rawName:"v-show",value:t.showSaveCover,expression:"showSaveCover"}],staticClass:"cta red",on:{click:function(e){return e.preventDefault(),t.onCancelCover()}}},[t._v("Zrušiť")]),t._v(" "),o("button",{directives:[{name:"show",rawName:"v-show",value:t.showSaveCover,expression:"showSaveCover"}],staticClass:"cta black"},[t._v(t._s(t.saveTextCover))])])]),t._v(" "),o("input",{ref:"fileInputCover",staticClass:"hidden",attrs:{name:"myFile",type:"file"},on:{change:function(e){return t.onFileSelectedCover(e)}}})]),t._v(" "),o("label",{attrs:{for:"long_text"}},[t._v("Kategórie")]),t._v(" "),o("div",{staticClass:"flex wrap tags"},t._l(t.categoryList.data,(function(e){return o("div",{key:e.id,class:t.categories.includes(e.id)?"tag active":"tag",on:{click:function(o){return o.preventDefault(),t.updateCategory(e.id)}}},[t._v(t._s(e.name))])})),0),t._v(" "),o("label",{attrs:{for:"long_text"}},[t._v("Značky")]),t._v(" "),o("div",{staticClass:"flex wrap tags"},t._l(t.tagList.data,(function(e){return o("div",{key:e.id,class:t.tags.includes(e.id)?"tag active":"tag",on:{click:function(o){return o.preventDefault(),t.updateTag(e.id)}}},[t._v(t._s(e.name))])})),0)])])])])])])}),[],!1,null,"71f8886b",null).exports,f={layout:"defaultAdmin",components:{SubNav:c.a,Hero:l.a,FormEdit:m},data:function(){return{}},asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n,l,c,d,v,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.$axios,n=t.params,e.next=3,Promise.all([o.$get("/book/"+n.id),o.$get("/category/all"),o.$get("/tag/all")]);case 3:return l=e.sent,c=Object(r.a)(l,3),d=c[0],v=c[1],m=c[2],e.abrupt("return",{dataDetail:d,categoryList:v,tagList:m});case 9:case"end":return e.stop()}}),e)})))()}},h=Object(v.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page"},[o("SubNav"),t._v(" "),o("Hero",{attrs:{h1:"Administrácia",h2:"Knižné tituly"}}),t._v(" "),o("FormEdit",{attrs:{dataDetail:t.dataDetail,categoryList:t.categoryList,tagList:t.tagList}})],1)}),[],!1,null,null,null);e.default=h.exports}}]);