(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{533:function(t,e,r){"use strict";r.r(e);var n={},o=r(2),l=Object(o.a)(n,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"component"},[e("div",{staticClass:"wrapper"},[e("div",{staticClass:"container-narrow grid gap-20"},[e("h2",[this._v("Create newsletter")]),this._v(" "),e("p",[this._v("Creating a newsletter has never been easier. You can start building audience really fast. Just fill in this form.")])])])])}],!1,null,"f77129ee",null).exports,c=(r(22),r(5)),m={data:function(){return{user_id:this.$store.state.userData.id,title:"",intro:"",description:"",og_img:"",creator_name:"",url:"",tags:"",scrapeData:"",charCounterIntro:0}},methods:{charCountIntro:function(){this.charCounterIntro=this.intro?this.intro.length:""},scrapePage:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$post("/api/maylday/pg/scrape",{url:t.url}).then((function(e){console.log(e),t.scrapeData=e,t.title=e.data.og_title,t.intro=e.data.og_description,t.url=e.data.og_url?e.data.og_url:t.url,t.og_img=e.data.og_image,t.creator_name=e.data.og_site_name?e.data.og_site_name:"manyBot",t.charCountIntro()}),(function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},submitForm:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$post("/api/maylday/newsletter",{user_id:t.user_id,title:t.title,intro:t.intro,creator_name:t.creator_name,url:t.url,og_img:t.og_img,tags:t.tags}).then((function(e){console.log(e),t.$store.dispatch("setUser").then((function(){t.$router.push("/admin/home/newsletter/success")}))}),(function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()}}},v={layout:"default-admin-home",components:{CreateIntro:l,CreateForm:Object(o.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"component grid gap-20"},[r("div",{staticClass:"box grid gap-20"},[r("form",{staticClass:"grid gap-20 ",on:{submit:function(e){return e.preventDefault(),t.scrapePage()}}},[r("h3",[t._v("What is your newsletter website?")]),t._v(" "),r("div",{staticClass:"grid gap-60 align-items-start"},[r("div",{staticClass:"grid gap-20"},[r("div",[r("label",{attrs:{for:"title"}},[t._v("Newsletter url")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],attrs:{type:"text",name:"url"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"hr"}),t._v(" "),t._m(0)]),t._v(" "),r("form",{staticClass:"grid gap-20 ",on:{submit:function(e){return e.preventDefault(),t.submitForm()}}},[r("h3",[t._v("Create a new newsletter")]),t._v(" "),r("div",{staticClass:"grid gap-60 align-items-start"},[r("div",{staticClass:"grid gap-20"},[r("div",[r("label",{attrs:{for:"title"}},[t._v("Newsletter title")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),r("div",[r("label",{attrs:{for:"title"}},[t._v("Newsletter short intro")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.intro,expression:"intro"}],attrs:{maxlength:"255",type:"text",name:"intro"},domProps:{value:t.intro},on:{keyup:function(e){return t.charCountIntro()},input:function(e){e.target.composing||(t.intro=e.target.value)}}}),t._v(" "),r("p",{staticClass:"char-counter"},[t._v(t._s(t.charCounterIntro)+" / 255")])]),t._v(" "),r("div",[r("label",{attrs:{for:"title"}},[t._v("Newsletter url")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],attrs:{type:"text",name:"url"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}})]),t._v(" "),r("div",[r("label",{attrs:{for:"title"}},[t._v("Newsletter image")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.og_img,expression:"og_img"}],attrs:{type:"text",name:"og_img"},domProps:{value:t.og_img},on:{input:function(e){e.target.composing||(t.og_img=e.target.value)}}})]),t._v(" "),r("div",[r("label",{attrs:{for:"title"}},[t._v("Newsletter creator name")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.creator_name,expression:"creator_name"}],attrs:{type:"text",name:"creator_name"},domProps:{value:t.creator_name},on:{input:function(e){e.target.composing||(t.creator_name=e.target.value)}}})])])]),t._v(" "),r("div",{staticClass:"hr"}),t._v(" "),r("div",[r("button",{staticClass:"cta",attrs:{type:"submit"}},[t._v("Create")]),t._v(" "),r("button",{staticClass:"cta white",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.$router.back()}}},[t._v(" Cancel ")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("button",{staticClass:"cta",attrs:{type:"submit"}},[this._v("Get data")])])}],!1,null,"523c1489",null).exports}},d=Object(o.a)(v,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page"},[e("CreateIntro"),this._v(" "),e("div",{staticClass:"container-narrow grid gap-60"},[e("CreateForm")],1)],1)}),[],!1,null,"e786e796",null);e.default=d.exports}}]);